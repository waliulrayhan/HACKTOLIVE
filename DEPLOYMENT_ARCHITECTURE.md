# ğŸŒ Automated Deployment Architecture

## Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Developer Workflow                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ git push origin main
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Repository                        â”‚
â”‚                   ShabikunShahria/HACKTOLIVE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Triggers
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Actions Runner                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Step 1: Build Backend (NestJS)                       â”‚  â”‚
â”‚  â”‚  â€¢ npm install                                       â”‚  â”‚
â”‚  â”‚  â€¢ npm run build                                     â”‚  â”‚
â”‚  â”‚  â€¢ Copy dist/, prisma/, package.json                 â”‚  â”‚
â”‚  â”‚  â€¢ Install production dependencies only             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Step 2: Build Frontend (Next.js)                     â”‚  â”‚
â”‚  â”‚  â€¢ npm install                                       â”‚  â”‚
â”‚  â”‚  â€¢ npm run build (standalone)                        â”‚  â”‚
â”‚  â”‚  â€¢ Copy .next/, public/, server.js                   â”‚  â”‚
â”‚  â”‚  â€¢ Install production dependencies only             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Step 3: Deploy via FTP                               â”‚  â”‚
â”‚  â”‚  â€¢ Upload to public_html/                            â”‚  â”‚
â”‚  â”‚  â€¢ Upload to public_html/backend/                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ FTP Transfer
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Hostinger Server                           â”‚
â”‚                                                              â”‚
â”‚  public_html/                                                â”‚
â”‚  â”œâ”€â”€ .next/              (Frontend build)                    â”‚
â”‚  â”œâ”€â”€ public/             (Static assets)                     â”‚
â”‚  â”œâ”€â”€ node_modules/       (Production deps)                   â”‚
â”‚  â”œâ”€â”€ server.js           (Next.js server)                    â”‚
â”‚  â”œâ”€â”€ .env                (Frontend env vars)                 â”‚
â”‚  â”‚                                                            â”‚
â”‚  â””â”€â”€ backend/                                                â”‚
â”‚      â”œâ”€â”€ dist/           (Backend build)                     â”‚
â”‚      â”œâ”€â”€ prisma/         (Schema & migrations)               â”‚
â”‚      â”œâ”€â”€ node_modules/   (Production deps)                   â”‚
â”‚      â””â”€â”€ .env            (Backend env vars)                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           PM2 Process Manager                        â”‚  â”‚
â”‚  â”‚                                                       â”‚  â”‚
â”‚  â”‚  hacktolive-frontend â†’ server.js (Port 3000)        â”‚  â”‚
â”‚  â”‚  hacktolive-backend  â†’ dist/main.js (Port 3001)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ Serves
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Users                               â”‚
â”‚                                                              â”‚
â”‚  https://yourdomain.com          â†’ Frontend (Next.js)       â”‚
â”‚  https://yourdomain.com/backend  â†’ Backend API (NestJS)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Flow

```
Local Repository
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ package.json
â””â”€â”€ backend/
    â”œâ”€â”€ src/
    â”œâ”€â”€ prisma/
    â””â”€â”€ package.json

         â†“ [Build Process]

Build Output
â”œâ”€â”€ deploy/public_html/
â”‚   â”œâ”€â”€ .next/standalone/
â”‚   â”œâ”€â”€ .next/static/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ node_modules/ (prod only)
â””â”€â”€ deploy/backend/
    â”œâ”€â”€ dist/
    â”œâ”€â”€ prisma/
    â””â”€â”€ node_modules/ (prod only)

         â†“ [FTP Upload]

Hostinger Server
â””â”€â”€ public_html/
    â”œâ”€â”€ [Frontend files]
    â””â”€â”€ backend/
        â””â”€â”€ [Backend files]
```

## Deployment Triggers

| Event | Action | Result |
|-------|--------|--------|
| Push to `main` | Automatic deployment | Latest code live |
| Manual trigger | GitHub Actions UI | Deploy without push |
| Pull request | No deployment | Only on merge to main |

## Environment Variables Flow

```
GitHub Secrets
â”œâ”€â”€ FTP_SERVER
â”œâ”€â”€ FTP_USERNAME
â”œâ”€â”€ FTP_PASSWORD
â””â”€â”€ NEXT_PUBLIC_API_URL
         â†“
GitHub Actions (Build time)
         â†“
Server .env files (Runtime)
â”œâ”€â”€ public_html/.env
â”‚   â””â”€â”€ NEXT_PUBLIC_API_URL
â””â”€â”€ public_html/backend/.env
    â”œâ”€â”€ DATABASE_URL
    â”œâ”€â”€ JWT_SECRET
    â””â”€â”€ PORT
```

## Port Configuration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Hostinger Server (Port 80)      â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Apache (Reverse Proxy)       â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚  yourdomain.com                â”‚ â”‚
â”‚  â”‚    â†’ localhost:3000 (Frontend) â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚  yourdomain.com/backend        â”‚ â”‚
â”‚  â”‚    â†’ localhost:3001 (Backend)  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Frontend     â”‚  â”‚ Backend     â”‚ â”‚
â”‚  â”‚ Port 3000    â”‚  â”‚ Port 3001   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Timeline

```
0s   â”‚ Developer pushes to main
     â”‚
1s   â”‚ GitHub Actions triggered
     â”‚
2s   â”‚ â”œâ”€ Checkout code
     â”‚ â””â”€ Setup Node.js
     â”‚
30s  â”‚ â”œâ”€ Install backend dependencies
     â”‚ â””â”€ Build backend
     â”‚
60s  â”‚ â”œâ”€ Install frontend dependencies
     â”‚ â””â”€ Build frontend (Next.js standalone)
     â”‚
90s  â”‚ â”œâ”€ Create deployment packages
     â”‚ â””â”€ Install production dependencies
     â”‚
120s â”‚ â”œâ”€ Upload via FTP to Hostinger
     â”‚ â”‚  â”œâ”€ Frontend â†’ public_html/
     â”‚ â”‚  â””â”€ Backend â†’ public_html/backend/
     â”‚
150s â”‚ â”œâ”€ Deployment complete
     â”‚ â””â”€ PM2 auto-restarts applications
     â”‚
     â”‚ âœ… Live!
```

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. GitHub Repository (Private)          â”‚
â”‚    â€¢ Code protected                      â”‚
â”‚    â€¢ Secrets encrypted                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. GitHub Actions (Secure)              â”‚
â”‚    â€¢ Isolated build environment          â”‚
â”‚    â€¢ Secrets not exposed in logs         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. FTP Transfer (Encrypted)             â”‚
â”‚    â€¢ Credentials in secrets              â”‚
â”‚    â€¢ No .env files transferred           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Hostinger Server                     â”‚
â”‚    â€¢ .env files created manually         â”‚
â”‚    â€¢ Database credentials secure         â”‚
â”‚    â€¢ JWT secrets never committed         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. HTTPS (SSL/TLS)                      â”‚
â”‚    â€¢ All traffic encrypted               â”‚
â”‚    â€¢ Hostinger SSL certificate           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Monitoring & Logging

```
GitHub Actions
â”œâ”€â”€ Build logs (each deployment)
â”œâ”€â”€ Error notifications
â””â”€â”€ Deployment status

         â†“

Hostinger Server (PM2)
â”œâ”€â”€ pm2 logs (real-time)
â”œâ”€â”€ Error logs per application
â””â”€â”€ CPU/Memory monitoring (pm2 monit)

         â†“

Application Logs
â”œâ”€â”€ Backend: backend/logs/
â””â”€â”€ Frontend: console logs via PM2
```

## Rollback Strategy

```
Problem Detected
       â†“
1. View PM2 logs: pm2 logs
       â†“
2. Check previous commit: git log
       â†“
3. Revert locally: git revert HEAD
       â†“
4. Push to main: git push origin main
       â†“
5. GitHub Actions redeploys
       â†“
6. Back to stable version
```

---

**For detailed setup instructions, see [DEPLOYMENT.md](./DEPLOYMENT.md)**
